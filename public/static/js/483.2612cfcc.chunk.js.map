{"version":3,"file":"static/js/483.2612cfcc.chunk.js","mappings":"gNAQA,MAsGA,EAtGiBA,KACf,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,GAEjCO,GAAWC,EAAAA,EAAAA,MACXC,GAAUC,EAAAA,EAAAA,YAAWC,EAAAA,GAoD3B,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0DAAyDC,SAAA,EACtEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,4CAA2CC,SAAC,UACzDX,IAASY,EAAAA,EAAAA,KAAA,KAAGF,UAAU,oBAAmBC,SAAEX,KAC5CS,EAAAA,EAAAA,MAAA,QAAMI,SAtDgBC,UACxBC,EAAMC,iBAIN,IAAKrB,EAAMsB,MAFQ,8BAIjB,YADAhB,EAAS,uCAIX,KAAMH,GAAYA,EAASoB,OAAS,GAGlC,OAFAjB,EAAS,qEACTE,GAAW,GAIb,MAAMgB,EAAW,CACfC,UAAWzB,EACX0B,aAAcvB,GAGhBK,GAAW,GACXF,EAAS,IAET,IACE,MAAMqB,QAAiBC,EAAAA,EAAMC,KAC3B,iCACAL,GAEFM,QAAQC,IAAI,YAAaJ,EAASK,MAEV,MAApBL,EAASM,SACXzB,GAAW,GACXG,EAAQuB,QACRC,aAAaC,QAAQ,SAAUT,EAASK,KAAKK,QAC7CF,aAAaC,QAAQ,QAAST,EAASK,KAAKM,OAC5C7B,EAAS,aAEb,CAAE,MAAOJ,GACPC,EACED,EAAMsB,SAASK,KAAK3B,OAClB,qDAEJyB,QAAQzB,MAAMA,EAChB,CACAJ,EAAS,IACTG,EAAY,IACZI,GAAW,EAAM,EAOmBQ,SAAA,EAChCC,EAAAA,EAAAA,KAACsB,EAAAA,EAAK,CACJC,KAAK,QACLC,KAAK,QACLC,KAAK,QACLC,MAAO3C,EACP4C,SAAWC,IACT5C,EAAS4C,EAAEC,OAAOH,OAClBrC,EAAS,GAAG,KAGhBW,EAAAA,EAAAA,KAACsB,EAAAA,EAAK,CACJC,KAAK,WACLC,KAAK,WACLC,KAAK,WACLC,MAAOxC,EACPyC,SAAWC,IACTzC,EAAYyC,EAAEC,OAAOH,OACrBrC,EAAS,GAAG,KAGhBW,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oDAAmDC,UAChEC,EAAAA,EAAAA,KAAC8B,EAAAA,GAAI,CAACC,GAAG,mBAAkBhC,SAAC,uBAE7BT,IAAWU,EAAAA,EAAAA,KAAA,OAAKF,UAAU,qBAAoBC,SAAC,gBAChDC,EAAAA,EAAAA,KAAA,UACEyB,KAAK,SACL3B,UAAU,kIAAiIC,SAC5I,eAIHC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iDAAgDC,UAC7DC,EAAAA,EAAAA,KAAC8B,EAAAA,GAAI,CAACC,GAAG,UAAShC,SAAC,mCAEjB,C,qDCxGV,MAqBA,EArBeiC,IACb,MAAM,KAAET,EAAO,GAAE,KAAEC,KAASS,GAAeD,EACrCE,EAAO,GAAAC,OAAMX,EAAI,UAEvB,OACE3B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEF,UAAU,iDACVsC,QAASF,EAAQnC,SAEhBwB,KAEHvB,EAAAA,EAAAA,KAAA,SACEqC,GAAIH,EACJpC,UAAU,gIACNmC,MAEF,C","sources":["Pages/Auth.js","components/util/Input.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport ProductsContext from \"../context/products-context\";\r\nimport Input from \"../components/util/Input\";\r\n\r\nconst AuthPage = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const authCtx = useContext(ProductsContext);\r\n\r\n  const formSubmitHandler = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n    if (!email.match(emailRegex)) {\r\n      setError(\"Please enter a valid email address.\");\r\n      return;\r\n    }\r\n\r\n    if (!(password && password.length > 5)) {\r\n      setError(\"Please enter a password which is at least 6 characters long.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const userData = {\r\n      userEmail: email,\r\n      userPassword: password,\r\n    };\r\n\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/auth\",\r\n        userData\r\n      );\r\n      console.log(\"Auth Page\", response.data);\r\n\r\n      if (response.status === 200) {\r\n        setLoading(false);\r\n        authCtx.login();\r\n        localStorage.setItem(\"userId\", response.data.userId);\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        navigate(\"/products\");\r\n      }\r\n    } catch (error) {\r\n      setError(\r\n        error.response.data.error ||\r\n          \"An error occurred during login. Please try again.\"\r\n      );\r\n      console.error(error);\r\n    }\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-8 p-6 bg-white rounded-md shadow-md\">\r\n      <h2 className=\"text-2xl font-semibold text-gray-800 mb-8\">Login</h2>\r\n      {error && <p className=\"mb-4 text-red-600\">{error}</p>}\r\n      <form onSubmit={formSubmitHandler}>\r\n        <Input\r\n          text=\"Email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={(e) => {\r\n            setEmail(e.target.value);\r\n            setError(\"\");\r\n          }}\r\n        />\r\n        <Input\r\n          text=\"Password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => {\r\n            setPassword(e.target.value);\r\n            setError(\"\");\r\n          }}\r\n        />\r\n        <div className=\"mb-4 font-semibold text-green-600 hover:underline\">\r\n          <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n        </div>\r\n        {loading && <div className=\"my-2 font-semibold\">Loading...</div>}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-500 font-semibold text-white w-full py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:shadow-outline-blue\"\r\n        >\r\n          Log In\r\n        </button>\r\n      </form>\r\n      <div className=\"mt-4 font-semibold text-center hover:underline\">\r\n        <Link to=\"/signup\">Don't have account? Signup</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthPage;\r\n","import React from \"react\";\r\n\r\nconst Input = (props) => {\r\n  const { text = \"\", name, ...inputProps } = props;\r\n  const inputId = `${name}-input`;\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      <label\r\n        className=\"block text-gray-700 text-sm font-semibold mb-2\"\r\n        htmlFor={inputId}\r\n      >\r\n        {text}\r\n      </label>\r\n      <input\r\n        id={inputId}\r\n        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n        {...inputProps}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n"],"names":["AuthPage","email","setEmail","useState","password","setPassword","error","setError","loading","setLoading","navigate","useNavigate","authCtx","useContext","ProductsContext","_jsxs","className","children","_jsx","onSubmit","async","event","preventDefault","match","length","userData","userEmail","userPassword","response","axios","post","console","log","data","status","login","localStorage","setItem","userId","token","Input","text","name","type","value","onChange","e","target","Link","to","props","inputProps","inputId","concat","htmlFor","id"],"sourceRoot":""}